import{C as M,D as T,E as P,o as N,G as C,n as E,t as $,i as k,e as I,S as F,b as G,H as K,s as x,l as A,F as B}from"./index.js";async function b(r,v){let l=[];return v===""?l=await M(r):l=await T(r,v),l!=null?(l.sort((y,w)=>y.Date<w.Date?1:-1),l):[]}var O=$('<div class=timeline-container title="Timeline: 24-hour history"><div class=timeline-bar></div><div class=timeline-labels><span>00:00</span><span>06:00</span><span>12:00</span><span>18:00</span><span>24:00'),R=$("<div>");function j(r){const[v,l]=P([]),[y,w]=P([]);let H;const p=e=>{const[i,n]=e.split(" "),[c,a,s]=i.split("-").map(Number),[f,d,t]=n.split(":").map(Number);return new Date(c,a-1,s,f,d,t)},D=e=>{const i=e.getHours(),n=e.getMinutes(),c=e.getSeconds();return(i*3600+n*60+c)/86400*100},S=e=>{if(e.length===0){w([]);return}const i=[],n=r.date||new Date().toISOString().split("T")[0],[c,a,s]=n.split("-").map(Number),f=new Date(c,a-1,s,0,0,0),d=new Date(c,a-1,s,23,59,59),t=[...e].sort((u,m)=>p(u.Date).getTime()-p(m.Date).getTime());let o=null,h=null;for(const u of t){const m=p(u.Date);if(m<f||m>d)continue;const g=u.Now===0?"off":"on";o===null?(o=g,h=m):g!==o&&(h&&i.push({start:D(h),end:D(m),status:o,date:u.Date,iface:u.Iface,ip:u.IP,known:String(u.Known)}),o=g,h=m)}o!==null&&h&&i.push({start:D(h),end:100,status:o,date:t[t.length-1].Date,iface:t[t.length-1].Iface,ip:t[t.length-1].IP,known:String(t[t.length-1].Known)}),w(i)};return N(async()=>{const e=await b(r.mac,r.date||"");l(e),S(e),H=setInterval(async()=>{const i=await b(r.mac,r.date||"");l(i),S(i)},6e4)}),C(()=>{clearInterval(H)}),E(()=>{r.date!==void 0&&S(v)}),(()=>{var e=O(),i=e.firstChild;return k(i,I(B,{each:y,children:(n,c)=>I(F,{get when(){return c()<A()},get children(){var a=R();return G(s=>{var f=`timeline-segment timeline-${n.status}`,d=`${n.start}%`,t=`${n.end-n.start}%`,o=`Date: ${n.date}
Iface: ${n.iface}
IP: ${n.ip}
Known: ${n.known}`;return f!==s.e&&K(a,s.e=f),d!==s.t&&((s.t=d)!=null?a.style.setProperty("left",d):a.style.removeProperty("left")),t!==s.a&&((s.a=t)!=null?a.style.setProperty("width",t):a.style.removeProperty("width")),o!==s.o&&x(a,"title",s.o=o),s},{e:void 0,t:void 0,a:void 0,o:void 0}),a}})})),e})()}export{j as M};
